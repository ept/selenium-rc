<project name="java-client-driver-generate-sources">

    <property name="maven.src.path" location="target/generated-sources/main/java/com/thoughtworks/selenium" />
	
	<property name="dir.java.tests.based.on.core.javascript" location="target/generated-sources/test/java/com/thoughtworks/selenium/corebased" />
	
	
    <target name="ant-generate-tests">
        <mkdir dir="target/selenium-server"/>
        <taskdef name="xlate" classname="org.openqa.selenium.XlatorTask" />
        
        <unzip src="${selenium-server}" dest="target/selenium-server">
            <patternset>
                <include name="tests/*.html" />
                <exclude name="**/html/**" />
                <exclude name="**/dogfood/aut/**" />
                <exclude name="**/*Suite.html" />
                <exclude name="**/GoogleTestSearch.html" /> <!-- thirdparty test, verified in non-generated -->
                <exclude name="**/TestUserExtensions.html" />
                <exclude name="**/TestSuite-*.html" />
                <exclude name="**/TestJS-for-loops.html" />
                <exclude name="**/TestJS-functions.html" />
                <exclude name="**/TestJS-if-then-else.html" />
                <exclude name="**/TestOpen_SSV_syntax.html" />
            </patternset>
        </unzip>

		<property name="dir.core.tests" location="target/selenium-server/tests" />
        <mkdir  dir="${dir.java.tests.based.on.core.javascript}" />
        
        <xlate destDir="${dir.java.tests.based.on.core.javascript}" formatter="java-rc-testng" baseUrl="http://localhost:4444/selenium-server/core/">
            <fileset dir="${dir.core.tests}"/>
            <option name="packageName" value="com.thoughtworks.selenium.corebased" />
        </xlate>
    </target>

</project>
