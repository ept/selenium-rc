<?xml version="1.0" encoding="UTF-8"?>
<project name="selenium" default="cruise" basedir=".">
	
	<property name="score.dir" value="../score"/>

	<macrodef name="svn-update">
                <attribute name="workdir"/>
                <sequential>
                        <exec dir="@{workdir}" executable="svn" failonerror="true">
                                <arg line="update --non-interactive"/>
                        </exec>
                </sequential>
        </macrodef>

	<target name="update">
		<svn-update workdir="${score.dir}"/>
		<svn-update workdir="."/>
	</target>

	<target name="score-build">
		<ant antfile = "build.xml" 
			dir="${score.dir}/code" 
			target="all" 
			output="score-build.log" />
	</target>

	<target name="src-build">
		<ant antfile = "build.xml" 
		     dir="." 
		     output="src-build.log" />
	</target>

	<target name="build" depends="score-build, src-build" />

	<target name="cruise" depends="update, build" />

	<target name="cruise-release" 
		description="build, then upload artifacts to OpenQA"
		depends="cruise">
		<echo message="Release script goes here :-)" />
	</target>

</project>

