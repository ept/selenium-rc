package com.thoughtworks.selenium;

import java.net.URL;

import org.openqa.selenium.server.SeleniumServer;

public class SSLOpenTest extends SeleneseTestCase {
    // DGF We use 127.0.0.2 because IE will attempt to contact 127.0.0.1 directly if that's its proxy port
    // 127.0.0.2 works just as well as any other loopback address
    protected String url = "https://127.0.0.2:4444/selenium-server/tests/html/test_open.html";
    protected String title = "Open Test";
    
    public SSLOpenTest(String name) {
        super(name);
    }

    public void setUp() throws Exception{
        // calculate browser based on test method name
        String name = getName();
        String browser = "*" + name.toLowerCase().substring(4);
        
        int port = SeleniumServer.getDefaultPort();
        
        // shorten url so we don't get a warning on the server side
        URL parsedUrl = new URL(url);
        String startUrl = parsedUrl.getProtocol() + "://" + parsedUrl.getAuthority();
        
        selenium = new DefaultSelenium("localhost", port, browser, startUrl);
        selenium.start();
    }
    
    public void runTest() {
        selenium.open(url);
        assertEquals(title, selenium.getTitle());
    }
    
    public void testFirefox() {
        runTest();
    }
    
    public void testIexplore() {
        runTest();
    }
    
    public void testOpera() {
        runTest();
    }
}
